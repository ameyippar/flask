<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %}</title>

    <style>
        /* =========================
           Base + Theme
           ========================= */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            color: var(--text);
            transition: color 0.3s;
        }

        :root {
            --text: #1f2937;
        }

        body.dark {
            --text: #e5e7eb;
        }

        /* =========================
           ðŸŒˆ Animated Gradient Background
           ========================= */
        body {
            background: linear-gradient(
                -45deg,
                #eef2ff,
                #f1f5f9,
                #e0e7ff,
                #f8fafc
            );
            background-size: 400% 400%;
            animation: gradientMove 18s ease infinite;
        }

        /* ðŸŒ™ Darkish Grey Night Mode */
        body.dark {
            background: linear-gradient(
                -45deg,
                #121212,
                #181818,
                #1f1f1f,
                #151515
            );
            background-size: 400% 400%;
            animation: gradientMove 22s ease infinite;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* =========================
           ðŸ§µ Subtle Texture Overlay
           ========================= */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background-image:
                radial-gradient(rgba(0,0,0,0.05) 1px, transparent 1px);
            background-size: 18px 18px;
            pointer-events: none;
            z-index: -1;
        }

        body.dark::before {
            background-image:
                radial-gradient(rgba(255,255,255,0.04) 1px, transparent 1px);
        }

        /* =========================
           Navigation
           ========================= */
        nav {
            background: rgba(37, 99, 235, 0.85);
            backdrop-filter: blur(10px);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        nav a {
            color: white;
            margin-right: 15px;
            text-decoration: none;
            font-weight: bold;
        }

        /* =========================
           Layout + Page Animation
           ========================= */
        .container {
            max-width: 900px;
            margin: auto;
            padding: 20px;
            animation: pageFade 0.4s ease;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* =========================
           ðŸ§Š Glassmorphism Cards
           ========================= */
        .card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.12);
            border: 1px solid rgba(255,255,255,0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        body.dark .card {
            background: rgba(30, 30, 30, 0.75);
            border: 1px solid rgba(255,255,255,0.08);
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow:
                0 20px 40px rgba(0,0,0,0.6),
                0 0 0 1px rgba(255,255,255,0.05);
        }

        /* =========================
           âœ¨ Buttons + Ripple Effect
           ========================= */
        .btn {
            position: relative;
            overflow: hidden;
            padding: 6px 12px;
            background: #2563eb;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
            transition: transform 0.15s ease, box counting shadow 0.15s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn.red { background: #dc2626; }
        .btn.green { background: #16a34a; }

        .ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s linear;
            background: rgba(255,255,255,0.5);
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* =========================
           ðŸŒˆ Gradient Status Badges
           ========================= */
        .badge {
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: bold;
            color: white;
            display: inline-block;
        }

        .badge.completed {
            background: linear-gradient(45deg, #22c55e, #4ade80);
        }

        .badge.inprogress {
            background: linear-gradient(45deg, #3b82f6, #60a5fa);
        }

        .badge.pending {
            background: linear-gradient(45deg, #f59e0b, #fbbf24);
        }

        @media (max-width: 600px) {
            nav { flex-direction: column; }
        }
    </style>
</head>

<body>
<nav>
    <div>
        <a href="/">Home</a>
        <a href="/add">Add Task</a>
        <a href="/about">About</a>
    </div>
    <a href="#" onclick="toggle()">ðŸŒ™</a>
</nav>

<div class="container">
    {% block content %}{% endblock %}
</div>

<script>
/* ðŸŒ™ Dark mode persistence */
function toggle() {
    document.body.classList.toggle('dark');
    localStorage.setItem(
        'theme',
        document.body.classList.contains('dark') ? 'dark' : 'light'
    );
}

window.onload = function () {
    if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
    }
};

/* ðŸŽ¯ Ripple Effect */
document.addEventListener("click", function (e) {
    if (!e.target.classList.contains("btn")) return;

    const btn = e.target;
    const circle = document.createElement("span");
    const diameter = Math.max(btn.clientWidth, btn.clientHeight);
    const radius = diameter / 2;

    circle.style.width = circle.style.height = `${diameter}px`;
    circle.style.left = `${e.offsetX - radius}px`;
    circle.style.top = `${e.offsetY - radius}px`;
    circle.classList.add("ripple");

    const ripple = btn.getElementsByClassName("ripple")[0];
    if (ripple) ripple.remove();

    btn.appendChild(circle);
});
</script>
</body>
</html>
